---
import BaseLayout from './BaseLayout.astro';

interface Props {
  title: string;
  date: string;
  investorOnly?: boolean;
}

const { title, date, investorOnly } = Astro.props;
const { user } = Astro.locals;
const formattedDate = new Date(date).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<BaseLayout title={`${title} | Tiny Fat Agents`}>
  <h1>TINY FAT AGENTS</h1>

  <p>
    <a href="https://tinyfat.com">Home</a> ✧
    <a href="https://tinyfat.com#how">How it works</a> ✶
    <a href="https://tinyfat.com#pricing">Pricing</a> ✻
    <a href="/">Blog</a> ✧
    {user ? (
      <a href="/api/auth/logout">Sign out</a>
    ) : (
      <a href="/login">Sign in</a>
    )}
  </p>

  <header class="post-header">
    <h2>{title}</h2>
    {investorOnly && <span class="investor-badge">Investor Update</span>}

    <p class="post-meta">
      <time datetime={date}>{formattedDate}</time>
    </p>
  </header>

  <article>
    <slot />
  </article>

  <p style="text-align: center; font-size: 3rem; margin: 2em 0;">✧</p>

  <p><a href="/">&larr; All posts</a></p>

  <p style="text-align: center; font-size: 3rem; margin: 1em 0;">✽</p>

  <p style="font-size: 0.85rem; color: #666;">
    <a href="https://tinyfat.com/legal/terms">Terms</a> ·
    <a href="https://tinyfat.com/legal/privacy">Privacy</a> ·
    <a href="https://tinyfat.com/legal/acceptable-use">Acceptable Use</a> ·
    <a href="https://tinyfat.com/contact">Contact</a>
  </p>

  <p>Built by <a href="https://alexgarcia.blog">Alex Garcia</a></p>
</BaseLayout>
